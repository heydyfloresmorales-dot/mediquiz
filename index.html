<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MediQuiz - Test Conexi√≥n y Pregunta</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
.container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);}
button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
#questionCard { margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 8px; background: #fafafa; }
.option { margin: 5px 0; }
.loading { display: none; }
</style>
</head>
<body>
<div class="container">
<h1>üìö MediQuiz - Test</h1>

<label for="gasUrl">URL del Google Apps Script:</label>
<input type="text" id="gasUrl" placeholder="https://script.google.com/macros/s/.../exec">

<button onclick="testConnection()">Probar Conexi√≥n</button>
<div id="status"></div>

<div id="questionCard" class="hidden">
    <h3 id="questionText"></h3>
    <div class="option" id="optA"></div>
    <div class="option" id="optB"></div>
    <div class="option" id="optC"></div>
    <div class="option" id="optD"></div>
</div>
</div>

<script>
async function testConnection() {
    const gasUrl = document.getElementById('gasUrl').value.trim();
    const statusEl = document.getElementById('status');
    if (!gasUrl) { alert('Ingresa el URL del Apps Script'); return; }

    statusEl.textContent = '‚è≥ Probando conexi√≥n...';
    try {
        const response = await fetch(gasUrl, { method: 'GET', mode: 'cors' });
        const data = await response.json();

        if(data.success) {
            statusEl.textContent = `‚úÖ Conexi√≥n OK: ${data.message}`;
            // Si la API devuelve una pregunta, mostrarla
            if(data.id || data.texto) { 
                showQuestion(data);
            }
        } else {
            statusEl.textContent = `‚ùå Error: ${data.error || 'Desconocido'}`;
        }
    } catch(err) {
        statusEl.textContent = `‚ùå Error de conexi√≥n: ${err.message}`;
    }
}

function showQuestion(q) {
    document.getElementById('questionCard').classList.remove('hidden');
    document.getElementById('questionText').textContent = q.texto;
    document.getElementById('optA').textContent = 'A) ' + q.opcionA;
    document.getElementById('optB').textContent = 'B) ' + q.opcionB;
    document.getElementById('optC').textContent = 'C) ' + q.opcionC;
    document.getElementById('optD').textContent = 'D) ' + q.opcionD;
}
</script>
</body>
</html>

